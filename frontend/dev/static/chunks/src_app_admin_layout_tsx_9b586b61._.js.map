{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/job-vacancy-frontend/job-vacancy-frontend/src/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Spin, message } from \"antd\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst AdminSidebar = dynamic(() => import(\"@/components/AdminSidebar\"), {\r\n  ssr: false,\r\n});\r\n\r\nconst AdminHeader = dynamic(() => import(\"@/components/AdminHeader\"), {\r\n  ssr: false,\r\n});\r\n\r\nexport default function AdminLayout({ children }: { children: React.ReactNode }) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n\r\n    const checkAuth = () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const userRole = localStorage.getItem(\"userRole\");\r\n\r\n        if (!token) {\r\n          message.error(\"Please login to access admin dashboard\");\r\n          setTimeout(() => {\r\n            router.push(\"/login\");\r\n          }, 100);\r\n          return;\r\n        }\r\n\r\n        if (userRole !== \"admin\") {\r\n          message.error(\"Access denied. Admin privileges required.\");\r\n          setTimeout(() => {\r\n            router.push(\"/\");\r\n          }, 100);\r\n          return;\r\n        }\r\n\r\n        setIsAuthorized(true);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Auth check error:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [mounted, router]);\r\n\r\n  if (!mounted || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Spin size=\"large\" tip=\"Checking permissions...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthorized) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <AdminSidebar />\r\n      <div className=\"ml-64\">\r\n        <AdminHeader />\r\n        <main className=\"p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;;;;;AALA;;;;;AAOA,MAAM,eAAe,IAAA,6KAAO,EAAC;;;;;;IAC3B,KAAK;;KADD;AAIN,MAAM,cAAc,IAAA,6KAAO,EAAC;;;;;;IAC1B,KAAK;;MADD;AAIS,SAAS,YAAY,EAAE,QAAQ,EAAiC;;IAC7E,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACR,WAAW;QACb;gCAAG,EAAE;IAEL,IAAA,0KAAS;iCAAC;YACR,IAAI,CAAC,SAAS;YAEd,MAAM;mDAAY;oBAChB,IAAI;wBACF,MAAM,QAAQ,aAAa,OAAO,CAAC;wBACnC,MAAM,WAAW,aAAa,OAAO,CAAC;wBAEtC,IAAI,CAAC,OAAO;4BACV,kMAAO,CAAC,KAAK,CAAC;4BACd;mEAAW;oCACT,OAAO,IAAI,CAAC;gCACd;kEAAG;4BACH;wBACF;wBAEA,IAAI,aAAa,SAAS;4BACxB,kMAAO,CAAC,KAAK,CAAC;4BACd;mEAAW;oCACT,OAAO,IAAI,CAAC;gCACd;kEAAG;4BACH;wBACF;wBAEA,gBAAgB;wBAChB,WAAW;oBACb,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,qBAAqB;wBACnC,WAAW;oBACb;gBACF;;YAEA;QACF;gCAAG;QAAC;QAAS;KAAO;IAEpB,IAAI,CAAC,WAAW,SAAS;QACvB,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,yLAAI;gBAAC,MAAK;gBAAQ,KAAI;;;;;;;;;;;IAG7B;IAEA,IAAI,CAAC,cAAc;QACjB,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;;;;;0BACD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;;;;kCACD,6LAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX;GApEwB;;QACP,kJAAS;;;MADF"}}]
}