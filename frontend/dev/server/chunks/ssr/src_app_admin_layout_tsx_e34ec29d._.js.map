{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/job-vacancy-frontend/job-vacancy-frontend/src/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Spin, message } from \"antd\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst AdminSidebar = dynamic(() => import(\"@/components/AdminSidebar\"), {\r\n  ssr: false,\r\n});\r\n\r\nconst AdminHeader = dynamic(() => import(\"@/components/AdminHeader\"), {\r\n  ssr: false,\r\n});\r\n\r\nexport default function AdminLayout({ children }: { children: React.ReactNode }) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAuthorized, setIsAuthorized] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n\r\n    const checkAuth = () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const userRole = localStorage.getItem(\"userRole\");\r\n\r\n        if (!token) {\r\n          message.error(\"Please login to access admin dashboard\");\r\n          setTimeout(() => {\r\n            router.push(\"/login\");\r\n          }, 100);\r\n          return;\r\n        }\r\n\r\n        if (userRole !== \"admin\") {\r\n          message.error(\"Access denied. Admin privileges required.\");\r\n          setTimeout(() => {\r\n            router.push(\"/\");\r\n          }, 100);\r\n          return;\r\n        }\r\n\r\n        setIsAuthorized(true);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Auth check error:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, [mounted, router]);\r\n\r\n  if (!mounted || loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Spin size=\"large\" tip=\"Checking permissions...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthorized) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <AdminSidebar />\r\n      <div className=\"ml-64\">\r\n        <AdminHeader />\r\n        <main className=\"p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;;;AALA;;;;;;AAOA,MAAM,eAAe,IAAA,0KAAO;;;;;;IAC1B,KAAK;;AAGP,MAAM,cAAc,IAAA,0KAAO;;;;;;IACzB,KAAK;;AAGQ,SAAS,YAAY,EAAE,QAAQ,EAAiC;IAC7E,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,SAAS;QAEd,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,QAAQ,aAAa,OAAO,CAAC;gBACnC,MAAM,WAAW,aAAa,OAAO,CAAC;gBAEtC,IAAI,CAAC,OAAO;oBACV,+LAAO,CAAC,KAAK,CAAC;oBACd,WAAW;wBACT,OAAO,IAAI,CAAC;oBACd,GAAG;oBACH;gBACF;gBAEA,IAAI,aAAa,SAAS;oBACxB,+LAAO,CAAC,KAAK,CAAC;oBACd,WAAW;wBACT,OAAO,IAAI,CAAC;oBACd,GAAG;oBACH;gBACF;gBAEA,gBAAgB;gBAChB,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qBAAqB;gBACnC,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;QAAS;KAAO;IAEpB,IAAI,CAAC,WAAW,SAAS;QACvB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,sLAAI;gBAAC,MAAK;gBAAQ,KAAI;;;;;;;;;;;IAG7B;IAEA,IAAI,CAAC,cAAc;QACjB,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;;;;0BACD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;;;;kCACD,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX"}}]
}